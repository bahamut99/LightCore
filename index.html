<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>LightCore - Your Health Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div id="auth-container">
      <div class="header-container">
        <img
          src="https://i.imgur.com/d5N9dkk.png"
          alt="LightCore Logo"
          style="height: 44px"
        />
        <h1>LightCore</h1>
      </div>
      <div class="card">
        <form id="login-form">
          <h2>Log In</h2>
          <label for="login-email">Email</label>
          <input type="email" id="login-email" required />
          <label for="login-password">Password</label>
          <input type="password" id="login-password" required />
          <button type="submit">Log In</button>
          <p id="auth-error" class="error-message" style="display: none"></p>
        </form>
        <form id="signup-form" style="display: none">
          <h2>Sign Up</h2>
          <label for="signup-email">Email</label>
          <input type="email" id="signup-email" required />
          <label for="signup-password">Password</label>
          <input type="password" id="signup-password" required minlength="6" />
          <button type="submit">Sign Up</button>
        </form>
        <p class="auth-toggle">
          <a href="#" id="show-signup">Don't have an account? Sign Up</a>
          <a href="#" id="show-login" style="display: none"
            >Already have an account? Log In</a
          >
        </p>
      </div>
    </div>

    <div id="app-container" style="display: none">
      <div class="header-container">
        <img
          src="https://i.imgur.com/d5N9dkk.png"
          alt="LightCore Logo"
          style="height: 44px"
        />
        <h1>LightCore - Your Health Dashboard</h1>
        <button id="logout-button" class="logout-btn">Log Out</button>
      </div>

      <div class="main-container">
        <div class="left-column">
          <div class="card">
            <h2>üìä Trends</h2>
            <div class="toggle-buttons">
              <button id="btn7day" class="active">7 Day</button>
              <button id="btn30day">30 Day</button>
            </div>
            <div class="chart-container">
              <canvas id="clarityChart"></canvas>
            </div>
            <div class="chart-container">
              <canvas id="immuneChart"></canvas>
            </div>
            <div class="chart-container">
              <canvas id="physicalChart"></canvas>
            </div>
          </div>
        </div>

        <div class="center-column">
          <div class="card">
            <label for="log">üìù Daily Log Entry</label>
            <textarea
              id="log"
              rows="5"
              placeholder="I woke up feeling clear-headed..."
            ></textarea>
            <div style="display: flex; align-items: center; gap: 0.5rem">
              <button id="analyzeBtn">Analyze Log</button>
              <div id="spinner" style="display: none" class="loader"></div>
            </div>
          </div>

          <div class="card" id="results" style="display: none">
            <div class="score">
              <span class="label">Mental Clarity:</span>
              <span id="clarity"></span>
            </div>
            <div class="score">
              <span class="label">Immune Risk:</span> <span id="immune"></span>
            </div>
            <div class="score">
              <span class="label">Physical Output:</span>
              <span id="physical"></span>
            </div>
            <div class="notes-section">
              <span class="label">AI Notes:</span>
              <p id="notes"></p>
            </div>
          </div>
          <div class="card">
            <h2>üïì Recent Entries</h2>
            <p class="subtle-text">Click on a row to see full details.</p>
            <table id="logTable">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Log</th>
                  <th>Clarity</th>
                  <th>Immune</th>
                  <th>Physical</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <div class="right-column">
          <div class="card">
            <label for="sleep-hours">Hours Slept üò¥</label>
            <input
              type="number"
              id="sleep-hours"
              min="0"
              max="24"
              step="0.5"
              placeholder="e.g., 7.5"
            />
            <label for="sleep-quality">Sleep Quality (1-5) ‚≠ê</label>
            <input
              type="number"
              id="sleep-quality"
              min="1"
              max="5"
              placeholder="1=Poor, 5=Excellent"
            />
          </div>
          <div class="card">
            <h2>üí° AI Insight</h2>
            <p id="ai-insight-text" class="subtle-text">
              Analyzing your data for new patterns...
            </p>
          </div>
        </div>
      </div>
    </div>

    <div id="logModal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <button id="closeModal" class="modal-close-btn">&times;</button>
        <h3 id="modalDate"></h3>
        <h4>Full Log Entry:</h4>
        <p id="modalLog"></p>
        <hr />
        <h4>Sleep Data:</h4>
        <div class="modal-scores">
          <div>
            <span class="label">Hours Slept:</span>
            <span id="modalSleepHours"></span>
          </div>
          <div>
            <span class="label">Sleep Quality (1-5):</span>
            <span id="modalSleepQuality"></span>
          </div>
        </div>
        <hr />
        <h4>AI Analysis:</h4>
        <div class="modal-scores">
          <div>
            <span class="label">Mental Clarity:</span>
            <span id="modalClarity"></span>
          </div>
          <div>
            <span class="label">Immune Risk:</span>
            <span id="modalImmune"></span>
          </div>
          <div>
            <span class="label">Physical Output:</span>
            <span id="modalPhysical"></span>
          </div>
        </div>
        <h4>AI Notes:</h4>
        <p id="modalNotes"></p>
      </div>
    </div>

    <script src="script.js" type="module"></script>
  </body>
</html>
